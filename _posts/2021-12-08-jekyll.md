---
layout: post
title: jekyllを使ったブログにカテゴリ・タグ一覧機能を追加してみた
published_at: 2021-12-08
author: YOURNAME
permalink: /2021/12/08-jekyll
categories: [tech]
tags: [Ruby, Jekyll]
---

こんにちは。H2開発グループの○○です。  
今回は、こちらのブログにカテゴリ・タグ一覧の機能を追加したため、その手順を備忘録がてら書いていこうと思います。  
カテゴリ一覧とタグ一覧は同様な実装をすることになるため、今回はカテゴリ一覧について書きます。  

## 自己紹介
@  
@saito-site...新卒1年目。5か月間の研修期間を経て、9月～11月は通販系サイトのリニューアルプロジェクトに在籍。  
　　　　　　　現在は次のプロジェクトまでの勉強期間中。

## カテゴリ一覧ページの実装

カテゴリ一覧を追加するにあたって、以下の4項目について実装します。

1. カテゴリ一覧ページの作成  
1. 記事一覧のそれぞれの記事表示にその記事のカテゴリを表示  
1. サイドバーにカテゴリ一覧を表示  
1. カテゴリ表示部にカテゴリ一覧ページの該当カテゴリへのリンクを付与  


### 1 カテゴリ一覧ページの作成

カテゴリ一覧ページでは、すべての記事からカテゴリを取得してカテゴリごとに並べ、該当する記事のタイトルをリンクをつけて表示します。

`category.html`を作成し、以下のコードを記述します。
{% raw %} 
```

category.html

---
layout: page
permalink: /categories/index
title: カテゴリ一覧
---

<div id="archives">
  {% for category in site.categories %}
    <div class="archive-group">
      {% capture category_name %}{{ category | first }}{% endcapture %}
      <h3 class="category-head"><a name="{{ category_name }}">{{ category_name | capitalize }}</a></h3>
      {% for post in site.categories[category_name] %}
        <article class="archive-item">
          <h4><a href="{{ site.baseurl }}{{ post.url }}">{{post.title}}</a></h4>
        </article>
      {% endfor %}
    </div>
  {% endfor %}
</div>
```
{% endraw %} 

Front Matter(３つのハイフンで囲まれている部分)で使用するレイアウトやページのurl名を決めています。  
コード内の\{\{ \}\}と\{％ ％\}で囲まれている部分は、jeckyllで使用されているテンプレート用言語[Liquid](https://shopify.github.io/liquid/){:target="_blank"}の書き方で、  
前者は内容の出力、後者は論理文の実行を示します。 

### 2 記事一覧のそれぞれの記事表示にその記事のカテゴリを表示

記事一覧は`_layouts/home.html`の`<article>`タグ内に記載されているため、  
`<article>`タグ内に記事ごとのカテゴリを表示させるようにコードを追加します。  

{% raw %} 
```

_layouts/home.html

{% for post in site.posts %}
  <article class="post-preview">
    <p class="post-meta">{{ post.published_at | date: '%Y-%m-%d' }}&nbsp;&nbsp;@{{post.author}}</p>
    <a href="{{ post.url | prepend: site.baseurl | replace: '//', '/' }}">
      <h1 class="post-title">{{ post.title }}</h1>
    </a>

 +  <p>
 +    Categories :
 +    {% for category in post.categories %}
 +      <a href="{{site.baseurl}}/categories/index#{{ category | slugify }}">{{ category | capitalize }}</a>
 +    {% endfor %}
 +  </p>

    <div class="post-content">{{ post.excerpt | strip_html | truncatewords: 200 }}</div>
  </article>

  <hr>
{% endfor %}
```
{% endraw %} 

### 3 サイドバーにカテゴリ一覧を表示

サイドバーは`_includes/aside.html`に記載されています。  
こちらにカテゴリ一覧表示のためのコードを追加します。  

{% raw %} 
```

_includes/aside.html

<div class="aside-categories">
  <p>:pencil: カテゴリ一覧</p>
  {% for category in site.categories %}
    {% capture category_name %}{{ category | first }}{% endcapture %}
    <div class="aside-categories-item">
      <a href="{{site.baseurl}}/categories/index#{{category_name}}" class="aside-link">
        {{ category_name | capitalize }}
      </a>
    </div>
  {% endfor %}
</div>
```
{% endraw %} 

## 感想

@saito-site...普段使用しているRailsとは違うフレームワークを使用するため、実装に5日(7.5h/日)かかると想定してい  
たものが、ふたを開けてみれば半分の2.5日で完了するものでした。  
ただ今回は先輩のコードを参照することができたため、自分1人の力ではおそらく想定していた日数かかるだろうなとい  
う印象を受けました。まずは1人でも2.5日以内に実装が完了できるように、これからも知識を増やしていきたいです。


ケーシーエスキャロット 採用情報は、[こちら](https://www.carrot.co.jp/recruit){:target="_blank"}
